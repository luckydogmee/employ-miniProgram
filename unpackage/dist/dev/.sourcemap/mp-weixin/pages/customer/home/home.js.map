{"version":3,"sources":["webpack:////Users/romens/ray/workspace/employ-miniProgram/pages/customer/home/home.vue?7449","webpack:////Users/romens/ray/workspace/employ-miniProgram/pages/customer/home/home.vue?c792","webpack:////Users/romens/ray/workspace/employ-miniProgram/pages/customer/home/home.vue?5b65","webpack:////Users/romens/ray/workspace/employ-miniProgram/pages/customer/home/home.vue?5f62","webpack:////Users/romens/ray/workspace/employ-miniProgram/pages/customer/home/home.vue"],"names":["userModel","UserModel","data","background","indicatorDots","autoplay","interval","duration","components","ListItem","uniPopup","methods","chooseImage","uni","success","res","tempFilePath","tempFilePaths","uploadFile","url","filePath","name","formData","uploadFileRes","console","log","getUserInfo","e","getPhoneNumber","detail","iv","encryptedData","errMsg","showToast","icon","title","checkSession","response","showLoading","getBindPhoneNumber","ivData","then","hideLoading","code","setStorageSync","token","$refs","noticeLogin","close","fail","err","toRegister","navigateTo","showDetail","that","getStorageSync","selectLoginType","login","provider","wxLogin","msg","errMeg","open"],"mappings":"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","file":"pages/customer/home/home.js","sourcesContent":["import { render, staticRenderFns } from \"./home.vue?vue&type=template&id=c8d3236a&\"\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('c8d3236a', component.options)\n    } else {\n      api.reload('c8d3236a', component.options)\n    }\n    module.hot.accept(\"./home.vue?vue&type=template&id=c8d3236a&\", function () {\n      api.rerender('c8d3236a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/romens/ray/workspace/employ-miniProgram/pages/customer/home/home.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=c8d3236a&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport UserModel from '@/models/user.js';\nimport ListItem from '@/components/ListItem/ListItem.vue'\nimport uniPopup from \"@/components/uni-popup/uni-popup.vue\"\nconst userModel = new UserModel() \nexport default {\n\tdata(){\n\t\treturn {\n\t\t\tbackground: ['color1', 'color2', 'color3'],\n\t\t\tindicatorDots: true,\n\t\t\tautoplay: true,\n\t\t\tinterval: 2000,\n\t\t\tduration: 500\n\t\t}\n\t}, \n\tcomponents:{\n\t\tListItem,\n\t\tuniPopup\n\t},\n\tmethods:{\n\t\tchooseImage(){\n\t\t\tuni.chooseImage({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconst tempFilePath = res.tempFilePaths\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl:'http://baidu.com',\n\t\t\t\t\t\tfilePath:tempFilePath[0],\n\t\t\t\t\t\tname:'file',\n\t\t\t\t\t\tformData:{\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess(uploadFileRes){\n\t\t\t\t\t\t\tconsole.log(uploadFileRes.data)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tgetUserInfo(e){\n\t\t\tconsole.log(e)\n\t\t},\n\t\tgetPhoneNumber(e){\n\t\t\tconst { iv, encryptedData, errMsg } = e.detail\n\t\t\tif( errMsg !== 'getPhoneNumber:ok' ){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\ttitle:'授权失败，请重新授权'\n\t\t\t\t})\n\t\t\t}\n\t\t\t// 以下执行登录,需要后台提供一个接口\n\t\t\tuni.checkSession({\n\t\t\t\tsuccess(response) {\n\t\t\t\t\tif(response.errMsg === 'login:ok'){\n\t\t\t\t\t\t// 此处执行后台登录过程，由后台得到手机号并与openid绑定，然后返回token\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '登录中，请稍候'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tuserModel.getBindPhoneNumber(encryptedData, ivData).then(res=>{\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t// 判断是成功了,在这里判断是否已经绑定手机号，以及是否完善信息，待写\n\t\t\t\t\t\t\tif (res.code === 'success') {\n\t\t\t\t\t\t\t\t// 将token存入缓存中\n\t\t\t\t\t\t\t\tuni.setStorageSync('token',res.data.token)\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle:'登录成功'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tthis.$refs.noticeLogin.close()\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle:'登录失败，请重新授权'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle:'获取code失败'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(err) {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\ttoRegister(){\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../../user/register/register',\n\t\t\t})\n\t\t},\n\t\tshowDetail(){\n\t\t\tconst that = this\n\t\t\tuni.checkSession({\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tconst token = uni.getStorageSync('token')\n\t\t\t\t},\n\t\t\t\tfail(err) {\n\t\t\t\t\tthat.selectLoginType()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tlogin(){\n\t\t\tuni.login({\n\t\t\t\tprovider: 'weixin',\n\t\t\t\tsuccess(res){\n\t\t\t\t\tif(res.errMsg === 'login:ok'){\n\t\t\t\t\t\t// 执行后台登录\n\t\t\t\t\t\tuserModel.wxLogin({\n\t\t\t\t\t\t\tcode: res.code\n\t\t\t\t\t\t}).then(res=>{\n\t\t\t\t\t\t\tif(res.code === 'success'){\n\t\t\t\t\t\t\t\t// 将返回的token存入本地\n\t\t\t\t\t\t\t\tuni.setStorageSync('token', res.data.token)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\t\ttitle: res.msg\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\ttitle: res.errMeg\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(err) {\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tselectLoginType(){\n\t\t\tthis.$refs.noticeLogin.open()\n\t\t}\n\t}\n}\n"],"sourceRoot":""}